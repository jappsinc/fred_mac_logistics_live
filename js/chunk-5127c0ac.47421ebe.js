(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5127c0ac"],{"1afb":function(e,t,a){e.exports={addPost:"create_addPost_3V7S7",label:"create_label_2hvRM",submit:"create_submit_lYDNO",editor:"create_editor_3eKca"}},bdef:function(e,t,a){"use strict";var r=a("1afb"),n=a.n(r);t["default"]=n.a},e9c7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"card"},[e._m(0),a("div",{staticClass:"card-body"},[a("div",{class:e.$style.addPost},[a("a-form",{staticClass:"mt-3",attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("div",{staticClass:"form-group"},[a("a-form-item",{attrs:{label:"Shipping Mark"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["shipping",{rules:[{required:!0,message:"Please provide shipping mark"}]}],expression:"['shipping',{ rules: [{ required: true, message: 'Please provide shipping mark' }]}]"}],staticStyle:{width:"100%"},attrs:{showSearch:"",placeholder:"Select a person",optionFilterProp:"children",filterOption:e.filterOption},on:{focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},e._l(e.usersData,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.customer_name))])})),1)],1),a("a-form-item",{attrs:{label:"Phone Number"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["pn",{rules:[{validator:e.validatePhone},{required:!0,message:"Please provide a Phone Number"}]}],expression:"['pn',{ rules: [{validator: validatePhone},{ required: true, message: 'Please provide a Phone Number' }]}]"}],staticStyle:{width:"100%"},attrs:{initialValue:0,placeholder:"Phone Number"}})],1),a("a-form-item",{attrs:{label:"CTN"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["ctn",{rules:[{required:!0,message:"Please provide a CTN Number"}]}],expression:"['ctn',{ rules: [{ required: true, message: 'Please provide a CTN Number' }]}]"}],staticStyle:{width:"100%"},attrs:{initialValue:0,placeholder:"CTN Number"}})],1),a("a-form-item",{attrs:{label:"CBM"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["cbm",{rules:[{required:!0,message:"Please provide a CBM Number"}]}],expression:"['cbm',{ rules: [{ required: true, message: 'Please provide a CBM Number' }]}]"}],staticStyle:{width:"100%"},attrs:{initialValue:0,placeholder:"CBM Number"}})],1),a("a-form-item",{attrs:{label:"Total in USD"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["usd",{rules:[{required:!0,message:"Please provide an Amount in USD"}]}],expression:"['usd',{ rules: [{ required: true, message: 'Please provide an Amount in USD' }]}]"}],staticStyle:{width:"100%"},attrs:{initialValue:0,formatter:function(e){return("$ "+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"Total in USD",id:"usd"},on:{blur:e.onChange}})],1),a("a-form-item",{attrs:{label:!1===e.false_conversion?"Total in Naira > to be auto-generated":"Total in Naira > Sorry conversion could not be established now, do convert manually"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["naira",{rules:[{required:!0,message:"Please provide an Amount in NGN"}]}],expression:"['naira',{ rules: [{ required: true, message: 'Please provide an Amount in NGN' }]}]"}],staticStyle:{width:"100%"},attrs:{initialValue:0,formatter:function(e){return(""+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"Total in Naira would be auto-generated",id:"naira",disabled:!1===e.false_conversion}})],1),a("a-form-item",{attrs:{label:"Container Number"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["container_number",{rules:[{required:!0,message:"Please provide a container Number"}]}],expression:"['container_number',{ rules: [{ required: true, message: 'Please provide a container Number' }]}]"}],staticStyle:{width:"100%"},attrs:{initialValue:0,placeholder:"Container Number"}})],1),a("br"),a("div",{staticClass:"form-group"},[a("a-form-item",[a("div",{class:e.$style.submit},[a("span",{staticClass:"mr-3"},[a("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("Create Shipment")])],1),a("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.handleReset()}}},[e._v("Discard")])],1)])],1)],1)])],1)])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"utils__title"},[a("strong",[e._v("Add Shipment Data")])])])}],i={name:"create",data:function(){return{form:this.$form.createForm(this),converted:!1,usersData:[],converted_value:4444,false_conversion:!1}},mounted:function(){this.getAllCustomers()},methods:{handleChange:function(e){},handleBlur:function(){},handleFocus:function(){},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(){var e=this,t=document.getElementById("usd").value;this.axios.get("convert_to_naira/"+t).then((function(t){e.converted=!0,e.handleConversionData(t.data.data.value)})).catch((function(e){console.log(e)}))},handleConversionData:function(e){0===e?this.false_conversion=!0:this.form.setFieldsValue({naira:e})},convertAmount:function(e,t,a,r){var n=this.$store.state.conversionApiKey;t=encodeURIComponent(t),a=encodeURIComponent(a);var i=t+"_"+a,s="https://api.currconv.com/api/v7/convert?q="+i+"&compact=ultra&apiKey="+n;this.axios.get(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},getAllCustomers:function(){var e=this;this.axios.get("clients").then((function(t){for(var a=t.data.data.client,r=[],n=0;n<a.length;n++){var i={customer_name:a[n].full_name,business_name:a[n].business_name,id:a[n].id};r.push(i)}e.usersData=r})).catch((function(e){console.log(e)}))},handleReset:function(){this.form.resetFields()},validatePhone:function(e,t,a){var r=this.form;return t?this.$validate("phone",r.getFieldValue("pn"))||a("Sorry not a valid phone number!"):a(),!0},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!1!==t.converted){if(!e){t.$nprogress.start();var r=t.usersData,n=a.shipping,i=r.map((function(e){return e.id})).indexOf(n),s={shipping_mark:r[i].customer_name,client_id:r[i].id,phone:a.pn,ctn:a.ctn,cbn:a.cbm,total_usd:a.usd,total_naira:a.naira,container_no:a.container_number};t.axios.post("shipment/store",s).then((function(e){t.$nprogress.done(),200===e.status&&(t.handleReset(),t.$notification["success"]({message:"Shipment Data",description:"Shipment data created"}))})).catch((function(e){return t.$nprogress.done(),t.$notification["warning"]({message:"Shipment Data",description:"An error occurred"}),e}))}}else t.$notification["warning"]({message:"Shipment Data",description:"Sorry currency conversion in progress, do wait"})}))}}},s=i,o=a("bdef"),l=a("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var c=Object(l["a"])(s,r,n,!1,u,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-5127c0ac.47421ebe.js.map